# Linux backdoor

## Attack tree

```text
1 Create backdoor
    1.1 Create a reverse https payload with Veil (OR)
        1.1.1 Choose payload and set options (reverse, https, lhost, lport) (AND)
        1.1.2 Generate 
    1.2 with Empire
        1.2.1 Select the multi/bash stager and set options
        1.2.2 Generate
    1.3 with FastRat
        1.3.1 Trojan Debian Package For remote access
            1.3.1.1 Trodebi
2 Check it is not detected by AV
3 Start listener using Metasploit (AND)
    3.1 Use exploit/multi/handler (AND)
    3.2 Set PAYLOAD (reverse, https, lhost, lport) (AND)
    3.3 Exploit
4 Deliver payload (start server) (AND)
    4.1 start apache2 on kali (service apache2 start) (AND)
    4.2 put payload in /var/www/html/evil-files (create dir) (AND)
    4.3 Deliver
        4.3.1 Nothing smart, just to test it works - Download from a machine in the network (OR)
        4.3.2 A little smarter, using BeEF - Fake notification bar
        4.3.3 ...
5 Post exploitation
```

## Notes

### Veil
* Veil is a framework for generating Undetectable backdoors. Make that less detectable.

### FastRat

Also attempts to generate Undetectable Metasploit backdoors for Windows, macOS, Linux, and Android. FatRat uses encryption to bypass most of the Antivirus. It can be configured for system exploitation, post-exploitation 
attacks, browser attacks, DLL attacks, FUD payloads, etc.

* SearchSploit gives a list of payloads and backdoors for every type of target
* File Pumper increases size of a payload to increase stealth

## Tools

* [Install veil for kali](https://github.com/Veil-Framework/Veil/)
* [GitHub TheFatRat](https://github.com/Exploit-install/TheFatRat)
* [Empire on Kali](https://www.kali.org/tools/powershell-empire/)
* [Github Empire 4](https://github.com/BC-SECURITY/Empire)
* [NoDistribute](https://nodistribute.com/)
* [Metasploit](https://www.kali.org/docs/tools/starting-metasploit-framework-in-kali/)
* [BeEF XSS](https://www.kali.org/tools/beef-xss/)

## Troubleshooting

* [Veil Installation error Failed to run (wine) Python pip pefile... Exit code: 1](../trouble/Veil.md)

## Cheatsheets

* [Empire wiki](https://bc-security.gitbook.io/empire-wiki/)
* [Evading Anti-Virus](cheatsheets:docs/payloads/evading-av)
* [Why use meterpreter](https://www.offensive-security.com/metasploit-unleashed/about-meterpreter/#Meterpreter_Design_Goals)

## Scripting

* [Nirridit (Evil files)](https://github.com/tymyrddin/nirridit)
* [Ymrir (Network hacking scripts)](https://github.com/tymyrddin/ymrir)